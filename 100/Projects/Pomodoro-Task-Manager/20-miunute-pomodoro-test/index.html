<!DOCTYPE html>
<html>
    <head>
        
    </head>
    <body>
        <div id="timer">
            25:00
        </div>

        <button id = "Start">
            Start
        </button>
        <button id = "Stop">
            Stop
        </button>

        <script>
            //Variable that keeps track of whether or not a timer is active
            let timerRunning = false;

            //Start button pressed
            document.querySelector("#Start").onclick = function(){
                //Make sure the timer isn't already running
                if(timerRunning == false)
                {
                    //Get the amount of time displayed in the timer when the start button is pushed
                    const timeRemaining = document.querySelector("#timer").innerText.split(":");
                    const minutesOnTimerAtStart = timeRemaining[0];
                    const secondsOnTimerAtStart = timeRemaining[1];

                    //Calculate how many milliseconds remain //minutes * 60 * 1000 //seconds * 1000                
                    let millisecondsRemaining = (minutesOnTimerAtStart * 60 * 1000) + (secondsOnTimerAtStart * 1000);

                    let calculatedStartTime = new Date();
                    let calculatedEndTime = new Date(calculatedStartTime.getTime() + millisecondsRemaining);

                    console.log("Calculated start time: " + calculatedStartTime)
                    console.log("Calculated end time: " + calculatedEndTime)

                    //Begin running the timeout function
                    timeout();

                    function timeout(){
                        setTimeout(function(){
                            //Get the current time
                            let currentTime = new Date();

                            //Check if the timer is finished
                            if(currentTime >= calculatedEndTime)
                            {
                                console.log("Calculated End Time: " + calculatedEndTime)
                                console.log("Actual End Time: " + currentTime)
                            }
                            else
                            {
                                //Find out the remaining time by subtracting the current time from the time that the timer is supposed to end
                                let timeRemaining = calculatedEndTime.getTime() - currentTime.getTime();

                                //Calculatate how many minutes and seconds have passed
                                let minutesPassed = Math.floor((timeRemaining / 60000)) % 60;
                                let secondsPassed = Math.floor((timeRemaining /  1000)) % 60;

                                console.log(minutesPassed + ":" + secondsPassed)
                                //Restart
                                timeout();
                            }                        
                        }, 100)
                    }

                    //Timer is now running
                    timerRunning = true;
                }   
            }
        </script>
    </body>
</html>